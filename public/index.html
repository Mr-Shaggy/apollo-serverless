<!doctype html>
<html lang=en>
  <head>
    <meta charset=utf-8>
    <title>Begin + Apollo GraphQL API</title>
    <link rel="stylesheet" href="https://static.begin.app/starter/default.css">
    <link href="data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=" rel="icon" type="image/x-icon">
    <style>
      :root {
        --dark: #333333;
        --light: #EFEFEF;
      }

      .padding-0 {
        padding: 1rem;
      }

      .color-light {
        color: var(--light);
      }

      .background-color-dark {
        background-color: var(--dark);
      }

      .border-radius-4 {
        border-radius: 4px;
      }

    </style>
  </head>
  <body>
    <h1 class="center-text">Begin + Apollo GraphQL API</h1>
    <section
      class="padding-0 background-color-dark border-radius-4"
    >
      <pre><code id="code" class="color-light">
        Loading...
      </code></pre>
    </section>

    <!-- Example GraphQL query -->
    <script type=module>
      ;(async function() {
      const allStudentsQuery =
  `{
      allStudents {
        name {
          first
          last
        }
        dob
        picture {
          large
        }
        location {
          street
          city
          state
          postcode
        }
        phone
        cell
        email
        major
        gpa
        sid
        registered
        modified
        modifiedby
      }
    }`;
      let result = await fetch('/graphql', {
        method: 'post',
        body: JSON.stringify({allStudentsQuery}),
        headers: {
          'X-Requested-With': 'XMLHttpRequest',
          'Content-Type': 'application/json',
        }
      })
      let json = await result.json()
      console.log(json)
      let code = document.getElementById('code')
      code.innerHTML = JSON.stringify(json, null, 2)
      })()
    </script>
  </body>
</html>
